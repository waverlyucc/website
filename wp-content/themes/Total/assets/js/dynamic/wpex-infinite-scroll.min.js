!function(n){"use strict";"undefined"!=typeof wpex?n("div.infinite-scroll-nav").length?n(window).on("load",function(){var i;(i=n("#blog-entries")).infinitescroll(wpexInfiniteScroll,function(e){var t=n(e).css("opacity",0);t.imagesLoaded(function(){i.hasClass("blog-masonry-grid")&&(i.isotope("appended",t),t.css("opacity",0)),"undefined"!=typeof retinajs&&n.isFunction(retinajs)&&retinajs(),t.animate({opacity:1}),i.trigger("wpexinfiniteScrollLoaded",[t]),wpex.sliderPro(t),wpex.iLightbox(t),void 0!==n.fn.wpexEqualHeights&&n(".blog-equal-heights").wpexEqualHeights({children:".blog-entry-inner"}),void 0!==n.fn.mediaelementplayer&&t.find("audio, video").mediaelementplayer()})})}):console.log(".infinite-scroll-nav element not found"):console.log("wpex is not defined")}(jQuery),function(c,d,h){"use strict";d.infinitescroll=function(e,t,i){this.element=d(i),this._create(e,t)||(this.failed=!0)},d.infinitescroll.defaults={loading:{finished:h,finishedMsg:"",img:wpexInfiniteScroll.blankImg,msg:null,msgText:"",selector:null,speed:"fast",start:h},state:{isDuringAjax:!1,isInvalidPage:!1,isDestroyed:!1,isDone:!1,isPaused:!1,isBeyondMaxPage:!1,currPage:1},debug:!1,behavior:h,binder:d(c),nextSelector:"div.navigation a:first",navSelector:"div.navigation",contentSelector:null,extraScrollPx:150,itemSelector:"div.post",animate:!1,pathParse:h,dataType:"html",appendCallback:!0,bufferPx:40,errorCallback:function(){},infid:0,pixelsFromNavToBottom:h,path:h,prefill:!1,maxPage:h},d.infinitescroll.prototype={_binding:function(e){var t=this,i=t.options;if(i.v="2.0b2.120520",i.behavior&&this["_binding_"+i.behavior]!==h)this["_binding_"+i.behavior].call(this);else{if("bind"!==e&&"unbind"!==e)return this._debug("Binding value  "+e+" not valid"),!1;"unbind"===e?this.options.binder.unbind("smartscroll.infscr."+t.options.infid):this.options.binder[e]("smartscroll.infscr."+t.options.infid,function(){t.scroll()}),this._debug("Binding",e)}},_create:function(e,n){var o=d.extend(!0,{},d.infinitescroll.defaults,e);this.options=o;var a=d(c);if(!this._validate(e))return!1;var t=d(o.nextSelector).attr("href");if(!t)return this._debug("Navigation selector not found"),!1;o.path=o.path||this._determinepath(t),o.contentSelector=o.contentSelector||this.element,o.loading.selector=o.loading.selector||o.contentSelector,o.loading.msg=o.loading.msg||d('<div id="wpex-infscr-loading">'+o.loading.msgText+"</div>"),(new Image).src=o.loading.img,o.pixelsFromNavToBottom===h&&(o.pixelsFromNavToBottom=d(document).height()-d(o.navSelector).offset().top,this._debug("pixelsFromNavToBottom: "+o.pixelsFromNavToBottom));var i=this;return o.loading.start=o.loading.start||function(){d(o.navSelector).hide(),o.loading.msg.appendTo(o.loading.selector).show(),i.beginAjax(o)},o.loading.finished=o.loading.finished||function(){o.state.isBeyondMaxPage||o.loading.msg.fadeOut(o.loading.speed)},o.callback=function(e,t,i){o.behavior&&e["_callback_"+o.behavior]!==h&&e["_callback_"+o.behavior].call(d(o.contentSelector)[0],t,i),n&&n.call(d(o.contentSelector)[0],t,o,i),o.prefill&&a.bind("resize.infinite-scroll",e._prefill)},e.debug&&(!Function.prototype.bind||"object"!=typeof console&&"function"!=typeof console||"object"!=typeof console.log||["log","info","warn","error","assert","dir","clear","profile","profileEnd"].forEach(function(e){console[e]=this.call(console[e],console)},Function.prototype.bind)),this._setup(),o.prefill&&this._prefill(),!0},_prefill:function(){function e(){return t.options.contentSelector.height()<=i.height()}var t=this,i=d(c);this._prefill=function(){e()&&t.scroll(),i.bind("resize.infinite-scroll",function(){e()&&(i.unbind("resize.infinite-scroll"),t.scroll())})},this._prefill()},_debug:function(){!0===this.options.debug&&("undefined"!=typeof console&&"function"==typeof console.log?1===Array.prototype.slice.call(arguments).length&&"string"==typeof Array.prototype.slice.call(arguments)[0]?console.log(Array.prototype.slice.call(arguments).toString()):console.log(Array.prototype.slice.call(arguments)):Function.prototype.bind||"undefined"==typeof console||"object"!=typeof console.log||Function.prototype.call.call(console.log,console,Array.prototype.slice.call(arguments)))},_determinepath:function(e){var t=this.options;if(t.behavior&&this["_determinepath_"+t.behavior]!==h)return this["_determinepath_"+t.behavior].call(this,e);if(t.pathParse)return this._debug("pathParse manual"),t.pathParse(e,this.options.state.currPage+1);if(e.match(/^(.*?)\b2\b(.*?$)/))e=e.match(/^(.*?)\b2\b(.*?$)/).slice(1);else if(e.match(/^(.*?)2(.*?$)/)){if(e.match(/^(.*?page=)2(\/.*|$)/))return e=e.match(/^(.*?page=)2(\/.*|$)/).slice(1);e=e.match(/^(.*?)2(.*?$)/).slice(1)}else{if(e.match(/^(.*?page=)1(\/.*|$)/))return e=e.match(/^(.*?page=)1(\/.*|$)/).slice(1);this._debug("Sorry, we couldn't parse your Next (Previous Posts) URL. Verify your the css selector points to the correct A tag. If you still get this error: yell, scream, and kindly ask for help at infinite-scroll.com."),t.state.isInvalidPage=!0}return this._debug("determinePath",e),e},_error:function(e){var t=this.options;t.behavior&&this["_error_"+t.behavior]!==h?this["_error_"+t.behavior].call(this,e):("destroy"!==e&&"end"!==e&&(e="unknown"),this._debug("Error",e),("end"===e||t.state.isBeyondMaxPage)&&this._showdonemsg(),t.state.isDone=!0,t.state.currPage=1,t.state.isPaused=!1,t.state.isBeyondMaxPage=!1,this._binding("unbind"))},_loadcallback:function(e,t,i){var n,o=this.options,a=this.options.callback,s=o.state.isDone?"done":o.appendCallback?"append":"no-append";if(o.behavior&&this["_loadcallback_"+o.behavior]!==h)this["_loadcallback_"+o.behavior].call(this,e,t);else{switch(s){case"done":return this._showdonemsg(),!1;case"no-append":"html"===o.dataType&&(t=d(t="<div>"+t+"</div>").find(o.itemSelector));break;case"append":var r=e.children();if(0===r.length)return this._error("end");for(n=document.createDocumentFragment();e[0].firstChild;)n.appendChild(e[0].firstChild);this._debug("contentSelector",d(o.contentSelector)[0]),d(o.contentSelector)[0].appendChild(n),t=r.get()}if(o.loading.finished.call(d(o.contentSelector)[0],o),o.animate){var l=d(c).scrollTop()+d(o.loading.msg).height()+o.extraScrollPx+"px";d("html,body").animate({scrollTop:l},800,function(){o.state.isDuringAjax=!1})}o.animate||(o.state.isDuringAjax=!1),a(this,t,i),o.prefill&&this._prefill()}},_nearbottom:function(){var e=this.options,t=0+d(document).height()-e.binder.scrollTop()-d(c).height();return e.behavior&&this["_nearbottom_"+e.behavior]!==h?this["_nearbottom_"+e.behavior].call(this):(this._debug("math:",t,e.pixelsFromNavToBottom),t-e.bufferPx<e.pixelsFromNavToBottom)},_pausing:function(e){var t=this.options;if(!t.behavior||this["_pausing_"+t.behavior]===h){switch("pause"!==e&&"resume"!==e&&null!==e&&this._debug("Invalid argument. Toggling pause value instead"),e=!e||"pause"!==e&&"resume"!==e?"toggle":e){case"pause":t.state.isPaused=!0;break;case"resume":t.state.isPaused=!1;break;case"toggle":t.state.isPaused=!t.state.isPaused}return this._debug("Paused",t.state.isPaused),!1}this["_pausing_"+t.behavior].call(this,e)},_setup:function(){var e=this.options;if(!e.behavior||this["_setup_"+e.behavior]===h)return this._binding("bind"),!1;this["_setup_"+e.behavior].call(this)},_showdonemsg:function(){var e=this.options;e.behavior&&this["_showdonemsg_"+e.behavior]!==h?this["_showdonemsg_"+e.behavior].call(this):(e.loading.msg.find(".wpex-infscr-spinner").hide(),d(this).parent().fadeOut(e.loading.speed),e.errorCallback.call(d(e.contentSelector)[0],"done"))},_validate:function(e){for(var t in e)if(t.indexOf&&-1<t.indexOf("Selector")&&0===d(e[t]).length)return this._debug("Your "+t+" found no elements."),!1;return!0},bind:function(){this._binding("bind")},destroy:function(){return this.options.state.isDestroyed=!0,this.options.loading.finished(),this._error("destroy")},pause:function(){this._pausing("pause")},resume:function(){this._pausing("resume")},beginAjax:function(o){var a,s,e,r,l=this,t=o.path;if(o.state.currPage++,o.maxPage!=h&&o.state.currPage>o.maxPage)return o.state.isBeyondMaxPage=!0,void this.destroy();switch(a=d(o.contentSelector).is("table, tbody")?d("<tbody/>"):d("<div/>"),s="function"==typeof t?t(o.state.currPage):t.join(o.state.currPage),l._debug("heading into ajax",s),e="html"===o.dataType||"json"===o.dataType?o.dataType:"html+callback",o.appendCallback&&"html"===o.dataType&&(e+="+callback"),e){case"html+callback":l._debug("Using HTML via .load() method"),a.load(s+" "+o.itemSelector,h,function(e){l._loadcallback(a,e,s)});break;case"html":l._debug("Using "+e.toUpperCase()+" via $.ajax() method"),d.ajax({url:s,dataType:o.dataType,complete:function(e,t){(r=void 0!==e.isResolved?e.isResolved():"success"===t||"notmodified"===t)?l._loadcallback(a,e.responseText,s):l._error("end")}});break;case"json":l._debug("Using "+e.toUpperCase()+" via $.ajax() method"),d.ajax({dataType:"json",type:"GET",url:s,success:function(e,t,i){if(r=void 0!==i.isResolved?i.isResolved():"success"===t||"notmodified"===t,o.appendCallback)if(o.template!==h){var n=o.template(e);a.append(n),r?l._loadcallback(a,n):l._error("end")}else l._debug("template must be defined."),l._error("end");else r?l._loadcallback(a,e,s):l._error("end")},error:function(){l._debug("JSON ajax request failed."),l._error("end")}})}},retrieve:function(e){e=e||null;var t=this.options;if(t.behavior&&this["retrieve_"+t.behavior]!==h)this["retrieve_"+t.behavior].call(this,e);else{if(t.state.isDestroyed)return this._debug("Instance is destroyed"),!1;t.state.isDuringAjax=!0,t.loading.start.call(d(t.contentSelector)[0],t)}},scroll:function(){var e=this.options,t=e.state;e.behavior&&this["scroll_"+e.behavior]!==h?this["scroll_"+e.behavior].call(this):t.isDuringAjax||t.isInvalidPage||t.isDone||t.isDestroyed||t.isPaused||this._nearbottom()&&this.retrieve()},toggle:function(){this._pausing()},unbind:function(){this._binding("unbind")},update:function(e){d.isPlainObject(e)&&(this.options=d.extend(!0,this.options,e))}},d.fn.infinitescroll=function(t,i){switch(typeof t){case"string":var n=Array.prototype.slice.call(arguments,1);this.each(function(){var e=d.data(this,"infinitescroll");return!!e&&(!(!d.isFunction(e[t])||"_"===t.charAt(0))&&void e[t].apply(e,n))});break;case"object":this.each(function(){var e=d.data(this,"infinitescroll");e?e.update(t):(e=new d.infinitescroll(t,i,this)).failed||d.data(this,"infinitescroll",e)})}return this};var o,e=d.event;e.special.smartscroll={setup:function(){d(this).bind("scroll",e.special.smartscroll.handler)},teardown:function(){d(this).unbind("scroll",e.special.smartscroll.handler)},handler:function(e,t){var i=this,n=arguments;e.type="smartscroll",o&&clearTimeout(o),o=setTimeout(function(){d(i).trigger("smartscroll",n)},"execAsap"===t?0:100)}},d.fn.smartscroll=function(e){return e?this.bind("smartscroll",e):this.trigger("smartscroll",["execAsap"])}}(window,jQuery);