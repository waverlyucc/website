!function(r){"use strict";r(document).on("ready",function(){var a,i=r("#image_gallery"),l=r("#wpex_gallery_images_container ul.wpex_gallery_images");jQuery(".add_wpex_gallery_images").on("click","a",function(t){r(this);var e=i.val();t.preventDefault(),a||(a=wp.media.frames.image_gallery_frame=wp.media({frame:"post",title:wpexGmb.title,button:{text:wpexGmb.button},library:{type:"image"},multiple:!0,filterable:"all"})).on("insert",function(){a.state().get("selection").map(function(t){(t=t.toJSON()).id&&(e=e?e+","+t.id:t.id,l.append('\t\t\t\t\t\t\t<li class="image" data-attachment_id="'+t.id+'">\t\t\t\t\t\t\t\t<div class="attachment-preview">\t\t\t\t\t\t\t\t\t<div class="thumbnail">\t\t\t\t\t\t\t\t\t\t<img src="'+t.url+'" />\t\t\t\t\t\t\t\t\t</div>\t\t\t\t\t\t\t\t   <a href="#" class="wpex-gmb-remove" title="'+wpexGmb.remove+'"><div class="media-modal-icon"></div></a>\t\t\t\t\t\t\t\t</div>\t\t\t\t\t\t\t</li>'))}),i.val(e)}),a.open()}),l.sortable({items:"li.image",cursor:"move",scrollSensitivity:40,forcePlaceholderSize:!0,forceHelperSize:!1,helper:"clone",opacity:.65,placeholder:"wc-metabox-sortable-placeholder",start:function(t,e){e.item.css("background-color","#f6f6f6")},stop:function(t,e){e.item.removeAttr("style")},update:function(t,e){var a="";r("#wpex_gallery_images_container ul li.image").css("cursor","default").each(function(){var t=jQuery(this).attr("data-attachment_id");a=a+t+","}),i.val(a)}}),r("#wpex_gallery_images_container").on("click","a.wpex-gmb-remove",function(){r(this).closest("li.image").remove();var e="";return r("#wpex_gallery_images_container ul li.image").css("cursor","default").each(function(){var t=jQuery(this).attr("data-attachment_id");e=e+t+","}),i.val(e),!1})})}(jQuery);