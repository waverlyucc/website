!function(p){"use strict";p(document).ready(function(){var a,e,t,d,l,i;p(".wpex-checkbox").click(function(){p(".wpex-theme-panel-updated").show()}),p('.wpex-theme-panel .manage-right input[type="text"]').change(function(){p(".wpex-theme-panel-updated").show()}),p(".wpex-theme-panel-updated a").click(function(e){e.preventDefault(),p("#wpex-theme-panel-form #submit").click()}),p(".wpex-checkbox").change(function(){var e=p(this).parent("th").parent(".wpex-module");e.hasClass("wpex-disabled")?e.removeClass("wpex-disabled"):e.addClass("wpex-disabled")}),p(".wpex-theme-panel-module-link").click(function(){p(".wpex-theme-panel-updated").show();var e=p(this),a=e.attr("href"),t=p(a).find(".wpex-checkbox"),i=e.parents(".wpex-module");return t.is(":checked")?t.attr("checked",!1):t.attr("checked",!0),i.hasClass("wpex-disabled")?i.removeClass("wpex-disabled"):i.addClass("wpex-disabled"),!1}),(a=p(".wpex-filter-active button")).click(function(){var e=p(this).data("filter-by");return a.removeClass("active"),p(this).addClass("active"),p(".wpex-module").removeClass("wpex-filterby-hide"),"active"===e?p(".wpex-module").each(function(){p(this).hasClass("wpex-disabled")&&p(this).addClass("wpex-filterby-hide")}):"inactive"===e&&p(".wpex-module").each(function(){p(this).hasClass("wpex-disabled")||p(this).addClass("wpex-filterby-hide")}),!1}),p(".wpex-theme-panel-sort a").click(function(){var e=p(this).data("category");return p(".wpex-theme-panel-sort a").removeClass("wpex-active-category"),p(this).addClass("wpex-active-category"),"all"===e?p(".wpex-module").removeClass("wpex-sort-hide"):(p(".wpex-module").addClass("wpex-sort-hide"),p(".wpex-category-"+e).each(function(){p(this).removeClass("wpex-sort-hide")})),!1}),e=p(".wpex-module.wpex-active").length,t=p(".wpex-module.wpex-disabled").length,p(".wpex-active-items-btn > span").text("("+e+")"),p(".wpex-inactive-items-btn > span").text("("+t+")"),p("a#wpex-help-toggle").click(function(){return p("#wpex-notice").toggle(),!1}),void 0!==p.fn.chosen&&(p(".wpex-chosen").chosen(),p(".wpex-chosen-multiselect").chosen({search_contains:!0}),p("#wpex_header_builder_select_chosen, #wpex_footer_builder_select_chosen").css("width","300")),void 0!==p.fn.wpColorPicker&&p(".wpex-color-field").wpColorPicker(),function(){var i=p(".wpex-panel-js-tabs a");if(i.length){var e=p(".wpex-panel-js-tabs a.nav-tab-active").attr("href").substring(1);p(".wpex-"+e).show(),p(i).each(function(){var t=p(this);t.click(function(e){e.preventDefault(),i.removeClass("nav-tab-active"),t.addClass("nav-tab-active");var a=p(this).attr("href").substring(1);p(".wpex-tab-content").hide(),p(".wpex-"+a).show()})})}}(),d=!0,l=wp.media.editor.send.attachment,p(".wpex-media-upload-button").click(function(){wp.media.editor.send.attachment;var n=p(this),c=n.prev();return wp.media.editor.send.attachment=function(e,a){if(!d)return l.apply(this,[e,a]);p(c).val(a.id);var t=n.parent().find(".wpex-media-live-preview img"),i=n.parent().find(".wpex-media-remove");if(i.length&&i.show(),t.length)t.attr("src",a.url);else{var s=(t=n.parent().find(".wpex-media-live-preview")).data("image-size")?t.data("image-size"):"auto";t.append('<img src="'+a.url+'" style="height:'+s+"px;width:"+s+'px;" />')}},wp.media.editor.open(n),!1}),p(".add_media").on("click",function(){d=!1}),p(".wpex-media-remove").each(function(){var e=p(this),a=e.parent().find(".wpex-media-input"),t=a.val(),i=e.parent().find(".wpex-media-live-preview");t&&e.show(),e.on("click",function(){return a.val(""),i.find("img").remove(),e.hide(),!1})}),(i=p("#wpex-theme-license-form")).length&&i.submit(function(e){e.preventDefault();var a=p(this),i=a.find("#submit"),s=a.find(".wpex-spinner"),n=i.hasClass("activate")?"activate":"deactivate",c=a.find("input#wpex_license"),d=a.find("input#wpex_dev_license");p(".wpex-admin-ajax-notice").hide().removeClass("notice-warning updated notice-error"),p.ajax({type:"POST",url:ajaxurl,data:{action:"wpex_theme_license_form",process:n,license:a.find("input#wpex_license").val(),devlicense:d.is(":checked")?"checked":0,nonce:a.find("input#wpex_theme_license_form_nonce").val()},beforeSend:function(){s.css("opacity","1"),i.prop("disabled",!0)},success:function(e){if(s.css("opacity","0"),i.prop("disabled",!1),e.success)if(d.parent().hide(),"activate"===n)c.attr("readonly","readonly"),i.removeClass("activate").addClass("deactivate").val(i.data("deactivate"));else if("deactivate"===n)if(c.attr("placeholder","").removeAttr("readonly"),c.val(""),i.removeClass("deactivate").addClass("activate").val(i.data("activate")),e.clearLicense){var a=window.location.href,t="";t=-1<a.indexOf("?")?a+"&license-cleared=1":a+"?license-cleared=1",window.location=t}else location.reload();e.message&&p(".wpex-admin-ajax-notice").addClass(e.messageClass).html("<p>"+e.message+"</p>").show()}})}),p(".wpex-custom-css-panel-wrap .form-table").click(function(){p(".wpex-remember-to-save").show()}),p(".wpex-custom-css-panel-wrap .wpex-remember-to-save a").click(function(e){e.preventDefault(),p(".wpex-custom-css-panel-wrap form #submit").click()}),p("#wpex-dashicon-select a").click(function(){return p("#wpex-dashicon-select a.button-primary").removeClass("button-primary").addClass("button-secondary"),p(this).addClass("button-primary"),p(this).parents("#wpex-dashicon-select").next("input").val(p(this).data("value")),!1})})}(jQuery);